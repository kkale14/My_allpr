package First;


import java.io.IOException;

import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.http.HttpSession;

import first.Adminandstdmodel;
import jakarta.servlet.http.HttpServlet;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;

public class MemberServlet  extends HttpServlet{
	
	private Dao de;
	

	public void init() {
		de = new Dao();
	}
	
	public void service(HttpServletRequest req,HttpServletResponse res)
	{
			String data = req.getParameter("data");
		
		if("register".equals(data)) {
			register1(req,res);
		}else if("login".equals(data)) {
		 {
			//res.sendRedirect("regerror.html");
		 }else
		 {
			 
		 }
		
		
		
	}
	private void register1(HttpServletRequest request, HttpServletResponse response)
            throws  IOException {

        int registerUserId = 0;
        
  
        String name = request.getParameter("name");
        String item = request.getParameter("item");
       // String phone = request.getParameter("phone");
        int product = request.getParameter("product");
      
        Service se1 = new Service();
        
        se1.setName(name);
        se1.setItem(item);
        
        se1.setProduct(product);
      

        try {
            registerUserId = de.register(se1);
        } catch (Exception e) {
            e.printStackTrace();
        }

        if (registerUserId > 0) {
        	
            request.setAttribute("name", se1.getName());
            request.setAttribute("email", se1.getItem());
         //   request.setAttribute("phone", andst.getPhone());
            request.setAttribute("username", se1.getProduct());
          
            RequestDispatcher requestDispatcher = request.getRequestDispatcher("");
            requestDispatcher.forward(request, response);
        } else {
            RequestDispatcher requestDispatcher = request.getRequestDispatcher("");
            requestDispatcher.forward(request, response);
        }
    }
	
	

}
